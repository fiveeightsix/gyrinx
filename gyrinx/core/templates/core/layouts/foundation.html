<!DOCTYPE html>
{% load static custom_tags %}
<html lang="en" data-bs-theme="auto">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="Gyrinx">
        <meta name="author" content="Gyrinx">
        <meta name="keywords" content="Necromunda, Gyrinx">
        <title>
            {% block head_title %}
            {% endblock head_title %}
        </title>
        <link rel="stylesheet"
              href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
        <link rel="stylesheet" href="{% static 'core/css/styles.css' %}">
        <script id="Cookiebot"
                src="https://consent.cookiebot.com/uc.js"
                data-cbid="92d724a2-6639-4e73-81ef-6607b76df67d"
                data-blockingmode="auto"
                type="text/javascript"></script>
        {% settings_value "GOOGLE_ANALYTICS_ID" as analytics_id %}
        {% if analytics_id %}
            <script data-cookieconsent="ignore">
                window.dataLayer = window.dataLayer || [];
                function gtag() {
                    dataLayer.push(arguments);
                }
                gtag("consent", "default", {
                    ad_personalization: "denied",
                    ad_storage: "denied",
                    ad_user_data: "denied",
                    analytics_storage: "denied",
                    functionality_storage: "denied",
                    personalization_storage: "denied",
                    security_storage: "granted",
                    wait_for_update: 500,
                });
                gtag("set", "ads_data_redaction", true);
                gtag("set", "url_passthrough", false);
            </script>
            <!-- Google tag (gtag.js) -->
            <script async
                    src="https://www.googletagmanager.com/gtag/js?id={{ analytics_id }}"></script>
            <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){dataLayer.push(arguments);}
                gtag('js', new Date());

                {% if user.is_authenticated %}
                gtag('config', '{{ analytics_id }}', {
                    'user_id': 'id:{{ user.id }}'
                });
                {% else %}
                gtag('config', '{{ analytics_id }}');
                {% endif %}
            </script>
        {% endif %}
    </head>
    <body>
        {% block base %}
        {% endblock base %}
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
                crossorigin="anonymous"></script>
        <script type="module" src="{% static 'core/js/index.js' %}"></script>
    </body>
</html>
