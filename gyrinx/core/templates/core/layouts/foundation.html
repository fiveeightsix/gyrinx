<!DOCTYPE html>
{% load static custom_tags %}
<html lang="en"
      data-bs-theme="{% if request.COOKIES.theme_active %}{{ request.COOKIES.theme_active }}{% else %}auto{% endif %}">
    <!-- {{ request.COOKIES.theme_active }}-->
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description"
              content="Gyrinx is a new set of tools for the Necromunda community">
        <meta name="author" content="Gyrinx">
        <meta name="keywords" content="Necromunda, Gyrinx">
        <meta name="application-name" content="Gyrinx" />
        <link rel="apple-touch-icon-precomposed"
              sizes="57x57"
              href="{% static 'core/img/brand/favicon/apple-touch-icon-57x57.png' %}" />
        <link rel="apple-touch-icon-precomposed"
              sizes="114x114"
              href="{% static 'core/img/brand/favicon/apple-touch-icon-114x114.png' %}" />
        <link rel="apple-touch-icon-precomposed"
              sizes="72x72"
              href="{% static 'core/img/brand/favicon/apple-touch-icon-72x72.png' %}" />
        <link rel="apple-touch-icon-precomposed"
              sizes="144x144"
              href="{% static 'core/img/brand/favicon/apple-touch-icon-144x144.png' %}" />
        <link rel="apple-touch-icon-precomposed"
              sizes="60x60"
              href="{% static 'core/img/brand/favicon/apple-touch-icon-60x60.png' %}" />
        <link rel="apple-touch-icon-precomposed"
              sizes="120x120"
              href="{% static 'core/img/brand/favicon/apple-touch-icon-120x120.png' %}" />
        <link rel="apple-touch-icon-precomposed"
              sizes="76x76"
              href="{% static 'core/img/brand/favicon/apple-touch-icon-76x76.png' %}" />
        <link rel="apple-touch-icon-precomposed"
              sizes="152x152"
              href="{% static 'core/img/brand/favicon/apple-touch-icon-152x152.png' %}" />
        <link rel="icon"
              type="image/png"
              href="{% static 'core/img/brand/favicon/favicon-196x196.png' %}"
              sizes="196x196" />
        <link rel="icon"
              type="image/png"
              href="{% static 'core/img/brand/favicon/favicon-96x96.png' %}"
              sizes="96x96" />
        <link rel="icon"
              type="image/png"
              href="{% static 'core/img/brand/favicon/favicon-32x32.png' %}"
              sizes="32x32" />
        <link rel="icon"
              type="image/png"
              href="{% static 'core/img/brand/favicon/favicon-16x16.png' %}"
              sizes="16x16" />
        <link rel="icon"
              type="image/png"
              href="{% static 'core/img/brand/favicon/favicon-128x128.png' %}"
              sizes="128x128" />
        <title>
            {% block head_title %}
            {% endblock head_title %}
            | Gyrinx
        </title>
        <link rel="stylesheet"
              href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
        <link rel="stylesheet" href="{% static 'core/css/styles.css' %}">
        <script id="Cookiebot"
                src="https://consent.cookiebot.com/uc.js"
                data-cbid="92d724a2-6639-4e73-81ef-6607b76df67d"
                data-blockingmode="auto"
                type="text/javascript"></script>
        {% settings_value "GOOGLE_ANALYTICS_ID" as analytics_id %}
        {% if analytics_id %}
            <script data-cookieconsent="ignore">
                        window.dataLayer = window.dataLayer || [];
                        function gtag() {
                              dataLayer.push(arguments);
                        }
                        gtag("consent", "default", {
                              ad_personalization: "denied",
                              ad_storage: "denied",
                              ad_user_data: "denied",
                              analytics_storage: "denied",
                              functionality_storage: "denied",
                              personalization_storage: "denied",
                              security_storage: "granted",
                              wait_for_update: 500,
                        });
                        gtag("set", "ads_data_redaction", true);
                        gtag("set", "url_passthrough", false);
            </script>
            <!-- Google tag (gtag.js) -->
            <script async
                    src="https://www.googletagmanager.com/gtag/js?id={{ analytics_id }}"></script>
            <script>
                        window.dataLayer = window.dataLayer || [];
                        function gtag(){dataLayer.push(arguments);}
                        gtag('js', new Date());

                        {% if user.is_authenticated %}
                        gtag('config', '{{ analytics_id }}', {
                              'user_id': 'id:{{ user.id }}'
                        });
                        {% else %}
                        gtag('config', '{{ analytics_id }}');
                        {% endif %}
            </script>
        {% endif %}
    </head>
    <body>
        {% block base %}
        {% endblock base %}
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
                crossorigin="anonymous"></script>
        <script type="module" src="{% static 'core/js/index.js' %}"></script>
    </body>
</html>
